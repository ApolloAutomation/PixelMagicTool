<!DOCTYPE html>
<html lang="pt_BR">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate"
    />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />

    <title>Pixel Magic Tool - @ajotanc</title>

    <link
      rel="shortcut icon"
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAK9JREFUeNqUUssNwyAMJZWVUw4dhRHakZA6RqWMFEbwKDnk1FNBekEWxOBYQggL/D68yXXq+M7PtHkcefn89vrOw/UrP96w/NUFGiDLRz71GyY0QJa1Yn+nFa0ShqUNYCAF0QvoceOB4naEZif6UTNRapYaTyauRi4DEspr4Hbs5YKsbmtMyeJ0LxeESV4gB+hlSy4oO2txWysyus0a0+lO6vBjxcTMlG4mt2H6F2AAhU5NWu4dorQAAAAASUVORK5CYII=
    "
    />

    <style>
      * {
        box-sizing: border-box;
        font-family: "Tahoma", monospace;
        margin: 0;
        padding: 0;
      }

      body {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        font-size: 12px;
      }

      small {
        display: block;
        font-size: 11px;
        font-weight: 400;
        margin: 2px 0 5px;
        color: #1982c4;
      }

      a {
        text-decoration: none;
        color: #1982c4;
      }

      a:hover,
      a:focus,
      a:active {
        color: #235789;
      }

      .divider {
        width: calc(100% - 10px);
        height: 1px;
        background: #ececec;
        margin: 20px auto;
      }

      .container {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .content {
        width: 100%;
        min-width: 540px;
        max-width: 900px;
        margin: 20px;
      }

      .w-full {
        flex-basis: 100% !important;
      }

      .m-zero {
        margin: 0 !important;
      }

      #response,
      #preview,
      form,
      canvas {
        width: 100%;
      }

      form {
        margin: 0 auto;
        padding: 20px;
        background-color: #f8f8f8;
        border-radius: 8px;
        border: 1px solid #cccccc;
      }

      .row {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        margin: 20px 0 0;
      }

      .row:nth-child(2) {
        margin: 0;
      }

      .column {
        flex-basis: calc(50% - 10px);
        position: relative;
        padding: 0 5px;
      }

      label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
      }

      input[type="text"],
      input[type="number"],
      select,
      textarea {
        width: 100%;
        padding: 10px;
        border-radius: 5px;
        border: none;
        background-color: #f0f0f0;
        font-size: 12px;
        display: inline-block;
        outline: none;
      }

      input[type="color"] {
        width: 32px;
        height: 32px;
        cursor: pointer;
        padding: 0px 1px;
        outline: none;
      }

      .input-group {
        display: flex;
      }

      .input-group input {
        border-radius: 5px 0 0 5px;
      }

      .input-group .input-description {
        padding: 10px;
        font-size: 14px;
        color: #626262;
        background: #d9d9d9;
        border-radius: 0px 5px 5px 0;
      }

      textarea {
        resize: vertical;
        min-height: 120px;
        margin: 0 0 10px;
      }

      input[type="submit"] {
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        background-color: #4caf50;
        color: #fff;
        font-size: 12px;
        cursor: pointer;
      }

      .dropzone {
        width: 100%;
        border: 1px dashed #a9a9a9;
        background-color: #f5f5f5;
        color: #666;
        font-size: 12px;
        text-align: center;
        padding: 40px 10px;
        border-radius: 5px;
        margin: 20px 0;
        transition: all 0.5s ease-in-out;
      }

      .dropzone p {
        margin: 0;
        padding: 0;
      }

      .dropzone:hover {
        cursor: pointer;
        background-color: #eee;
      }

      .dropzone.dragover {
        background-color: #ddd;
      }

      .range-slider {
        appearance: none;
        background-color: #ddd;
        height: 8px;
        width: 100%;
        border-radius: 10px;
        outline: none;
        margin: 16px 0;
      }

      .range-slider::-webkit-slider-thumb {
        appearance: none;
        height: 16px;
        width: 16px;
        background-color: #4caf50;
        border-radius: 50%;
        cursor: pointer;
        border: 0;
      }

      .switch {
        position: relative;
        display: inline-block;
        width: 38px;
        height: 20px;
      }

      .switch input {
        outline: none;
        display: none;
      }

      .switch-slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        border-radius: 34px;
        transition: 0.4s;
      }

      .switch-slider:before {
        position: absolute;
        content: "";
        height: 14px;
        width: 14px;
        left: 3px;
        bottom: 3px;
        background-color: white;
        border-radius: 50%;
        transition: 0.4s;
      }

      input:checked + .switch-slider {
        background-color: #4caf50;
      }

      input:focus + .switch-slider {
        box-shadow: 0 0 1px #4caf50;
      }

      input:checked + .switch-slider:before {
        transform: translateX(18px);
      }

      #toast-container {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 9999;
      }

      .toast {
        display: flex;
        align-items: center;
        width: max-content;
        padding: 6px 12px;
        margin: 10px 0 0;
        border-radius: 8px;
        color: #fff;
        font-size: 12px;
        transform: translateY(30px);
        opacity: 0;
        visibility: hidden;
      }

      .toast .toast-body {
        padding: 8px 0;
        color: #fdfdfd;
      }

      .toast.success {
        background-color: #8ac926;
      }

      .toast.error {
        background-color: #ff595e;
      }

      .toast.warning {
        background-color: #f48c06;
      }

      .toast-progress {
        position: absolute;
        left: 4px;
        bottom: 4px;
        width: calc(100% - 8px);
        height: 3px;
        transform: scaleX(0);
        transform-origin: left;
        border-radius: inherit;
      }

      .toast.success .toast-progress {
        background: linear-gradient(to right, #8ac926, #548c2f);
      }

      .toast.error .toast-progress {
        background: linear-gradient(to right, #ff595e, #c9262b);
      }

      .toast.warning .toast-progress {
        background: linear-gradient(to right, #f48c06, #e85d04);
      }

      #multipleCanvas {
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        position: relative;
      }

      #multipleCanvas .carousel {
        display: flex;
        height: 100%;
        width: 100%;
        cursor: pointer;
      }

      #multipleCanvas .carousel img {
        display: block;
        width: 100%;
        height: 100%;
        margin-right: 20px;
        border: 0;
      }

      #multipleCanvas .carousel img:last-child {
        margin-right: 0;
      }

      .button {
        width: 100%;
        border: 0;
        padding: 10px 18px;
        border-radius: 4px;
        color: #fdfdfd;
        cursor: pointer;
        margin: 0 0 10px;
        background: #1982c4;
        transition: all 0.5s ease-in-out;
      }

      .button:hover {
        background: #4267ac;
      }

      .button:last-child {
        margin-bottom: 0;
      }

      .buttons {
        display: flex;
        flex-direction: column;
        width: 100%;
      }

      .buttonRainbow {
        width: 100%;
        border: 0;
        padding: 10px 18px;
        border-radius: 4px;
        color: #fdfdfd;
        cursor: pointer;
        background: linear-gradient(
          to right,
          #ff595e,
          #ffca3a,
          #8ac926,
          #1982c4,
          #6a4c93
        );
      }

      .buttonRainbow:hover {
        animation-play-state: paused;
      }

      #preview {
        border: 1px solid #cccccc;
        padding: 20px;
        margin: 20px 0 10px;
        border-radius: 8px;
      }

      #preview .buttons {
        margin: 0 0 20px;
      }

      #overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        display: none;
      }

      #overlay.loading::after {
        content: "";
        display: block;
        position: absolute;
        top: calc(50% - 19px);
        left: calc(50% - 19px);
        width: 26px;
        height: 26px;
        border: 6px solid rgba(255, 255, 255, 0.5);
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      input.invalid,
      select.invalid,
      textarea.invalid {
        border: 1px solid #df1f1f;
      }

      input.invalid + .error-message,
      select.invalid + .error-message,
      textarea.invalid + .error-message {
        display: block;
        color: #df1f1f;
        padding: 4px 0;
        font-size: 14px;
        font-weight: 600;
      }

      .slide-container {
        width: 100%;
        display: flex;
        overflow-x: auto;
        scroll-snap-type: x mandatory;
      }

      .slide {
        scroll-snap-align: center;
      }

      .header {
        display: flex;
        align-items: center;
        padding: 0 0 30px;
        flex-direction: column;
      }

      .header .brand {
        width: 100%;
        max-width: 200px;
        height: 100%;
        display: block;
        outline: none;
        border: 0;
      }

      footer {
        margin-top: 10px;
      }

      @media (max-width: 767px) {
        .content {
          min-width: 360px;
        }

        .row {
          flex-direction: column;
          margin: 0;
        }

        .column {
          flex-basis: 100%;
          margin: 20px 0 0;
          padding: 0;
        }

        .divider {
          margin: 20px auto 0;
        }
      }

      @media (min-width: 768px) {
        .row {
          flex-wrap: nowrap;
        }
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
        0% {
          border-top-color: #ff595e;
        }
        25% {
          border-top-color: #ffca3a;
        }
        50% {
          border-top-color: #8ac926;
        }
        75% {
          border-top-color: #1982c4;
        }
        100% {
          border-top-color: #6a4c93;
        }
      }

      @keyframes progress {
        to {
          transform: scaleX(1);
        }
      }

      @keyframes fadeIn {
        5% {
          opacity: 1;
          visibility: visible;
          transform: translateY(0);
        }

        95% {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="content">
        <form id="formGenerate" novalidate>
          <div class="header">
            <svg
              class="brand"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              x="0px"
              y="0px"
              viewBox="0 0 560 360"
              enable-background="new 0 0 560 360"
              xml:space="preserve"
            >
              <image
                x="0"
                y="0"
                href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAjAAAAFoCAMAAAB+GjFaAAAABGdBTUEAALGPC/xhBQAAACBjSFJN
          AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAA8FBMVEUAAAD0jAb0jAb0jAb0
          jAb0jAb0jAb0jAYlJSUlJSUlJSX0jAb0jAb0jAYlJSUlJSUlJSUlJSUlJSX0jAYlJSUlJSUlJSUl
          JSUlJSVqTJNqTJNqTJNqTJNqTJNqTJMZgsSKySb/yjr/WV6KySYZgsT/WV6KySaKySZqTJP/WV7/
          WV4ZgsT/WV7/WV7/WV7/yjoZgsQZgsSKySZqTJNqTJOKySYZgsSKySaKySb/WV7/WV4ZgsSKySZq
          TJMZgsSKySaKySaKySYZgsQZgsT/yjr/yjr/yjolJSX0jAYlJSVqTJMZgsSKySb/yjr/WV7///+0
          60LYAAAASHRSTlMAj78wQIDfn2C/gM9wIBBAMCCfYI/P799wIIBgQL/vQIC/QL+/v0Bw3xDPEHCA
          34/fgGDPcDBgnxBgIJ/fEM+PzyAwIJ+AQFCp9vlwAAAAAWJLR0RPbmZBSQAAAAd0SU1FB+cGCgIB
          LXgoLQQAAAtPSURBVHja7d1rQ9vWAYdxQoFgkiBwQwkEGgokTZMlS9ru0jXd1u5Wlm7f/+O0WJLR
          OT63vyRbFz/PO9DFkvWrSyzpaGODiIiIiIiIiIiIiIiIqNvubRZ90vWW0CDa/Lloq+stoUEEGJIC
          DEkBhqQAQ1KAobS283ZKMPfzn3FD7n52t931dlFPAwxJAYakAENSgCGpOmB2J+G63qc6zfdpt+st
          6Xl1wOzdhOt6n+o036e9rrek5wHG2ifAhNvKe1BKeZj//Ci0DGBIOjUAGAIMYKQAAxipNDB7eZMI
          mGI25z9Q97Oig473+DAzmgJGKg3MjZTz+5gsOHWF+T4mAWO1VWb8FjCA8TT/qsX47afFdTHbwX9P
          A2YNc4NJCzBrGGDyAJMYYPIAkxhg8gCTWFdgHudXDxyVUz8rLic46Oh9AExiTcAUx/h4gcasz4Jg
          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"
              />
            </svg>
          </div>
          <div class="row">
            <div class="column valitade">
              <label for="hostname">Hostname</label>
              <input type="text" name="hostname" id="hostname" required />
            </div>
            <div class="column valitade">
              <label for="name">Preset Name</label>
              <input
                type="text"
                name="name"
                id="name"
                value="New Preset"
                required
              />
            </div>
          </div>
          <div class="row">
            <div class="column valitade">
              <label for="pattern">Pattern</label>
              <select name="pattern" id="pattern" required>
                <option value="">Select a choice</option>
                <option value="1" title="['ffffff']" selected>
                  Individual
                </option>
                <option value="2" title="[0, 'ffffff']">Index</option>
                <option value="3" title="[0, 5, 'ffffff']">Range</option>
              </select>
            </div>
            <div class="column valitade">
              <label for="output">Output</label>
              <select name="output" id="output" required>
                <option value="">Select a choice</option>
                <option value="json" selected>WLED JSON</option>
                <option value="ha">Home Assistant</option>
                <option value="curl">CURL</option>
              </select>
            </div>
          </div>
          <div class="row output" style="display: none">
            <div class="column valitade">
              <label for="device">Device</label>
              <input type="text" name="device" id="device" required />
            </div>
            <div class="column valitade">
              <label for="uniqueId">Unique Id</label>
              <input type="text" name="uniqueId" id="uniqueId" required />
            </div>
            <div class="column valitade">
              <label for="friendlyName">Friendly Name</label>
              <input
                type="text"
                name="friendlyName"
                id="friendlyName"
                required
              />
            </div>
          </div>
          <div class="row">
            <div class="column valitade">
              <label for="segments">Segment Id</label>
              <select name="segments" id="segments" required>
                <option value="">Select a choice</option>
              </select>
            </div>
            <div class="column valitade">
              <label for="brightness">Brightness</label>
              <input
                type="range"
                name="brightness"
                id="brightness"
                min="0"
                max="255"
                value="128"
                class="range-slider"
              />
            </div>
          </div>
          <div class="row">
            <div class="column valitade">
              <label for="animation">Animation</label>
              <label class="switch">
                <input type="checkbox" name="animation" id="animation" />
                <span class="switch-slider"></span>
              </label>
            </div>
            <div class="column valitade">
              <label for="transparentImage">Transparent Image</label>
              <label class="switch">
                <input
                  type="checkbox"
                  name="transparentImage"
                  id="transparentImage"
                />
                <span class="switch-slider"></span>
              </label>
            </div>
            <div class="column valitade">
              <label for="resizeImage">Resize Image</label>
              <label class="switch">
                <input type="checkbox" name="resizeImage" id="resizeImage" />
                <span class="switch-slider"></span>
              </label>
            </div>
          </div>
          <div class="row resizeImage" style="display: none">
            <div class="column valitade">
              <label for="width">Width</label>
              <input type="number" name="width" id="width" value="16" />
            </div>
            <div class="column valitade">
              <label for="height">Height</label>
              <input type="number" name="height" id="height" value="16" />
            </div>
          </div>
          <div class="row animation" style="display: none">
            <div class="column valitade">
              <label for="frames">Frames</label>
              <input type="number" name="frames" id="frames" value="4" />
            </div>
            <div class="column valitade">
              <label for="duration">Duration</label>
              <div class="input-group">
                <input
                  type="number"
                  name="duration"
                  id="duration"
                  value="0.5"
                  required="required"
                  min="0"
                  step="0.1"
                  inputmode="numeric"
                />
                <div class="input-description">sec</div>
              </div>
            </div>
            <div class="column valitade">
              <label for="transition">Transition</label>
              <div class="input-group">
                <input
                  type="number"
                  name="transition"
                  id="transition"
                  value="0.2"
                  required="required"
                  min="0"
                  step="0.1"
                  inputmode="numeric"
                />
                <div class="input-description">sec</div>
              </div>
            </div>
          </div>
          <div class="row transparentImage" style="display: none">
            <div class="column valitade w-full">
              <label for="color">Choose a color</label>
              <small class="subtitle"
                >Color that will replace the
                <strong>transparent pixels</strong> in the image</small
              >
              <input type="color" name="color" id="color" value="#ffffff" />
            </div>
          </div>
          <div class="row">
            <div class="column valitade w-full">
              <label for="images">Images</label>
              <small class="subtitle"
                >Images uploaded to
                <a href="http://[wled-ip]/edit" target="_blank"
                  ><strong>WLED</strong></a
                >
                or upload image</small
              >
              <select name="images" id="images" required>
                <option value="">Select a choice</option>
              </select>
            </div>
          </div>
          <div id="dropzone" class="dropzone valitade" style="display: none">
            <p id="dropzoneLabel">
              Drag and drop a file here or click to select a file
            </p>
            <input
              type="file"
              name="source"
              id="source"
              accept="image/*"
              style="display: none"
            />
          </div>
          <div class="row">
            <div class="column w-full">
              <button type="button" class="buttonRainbow" id="btnGenerate">
                Generate
              </button>
            </div>
          </div>
        </form>
        <div id="preview" style="display: none">
          <div class="row m-zero">
            <div class="column w-full">
              <textarea
                name="response"
                id="response"
                cols="30"
                rows="10"
                readonly="readonly"
              ></textarea>
            </div>
          </div>
          <div id="isNotAnimation">
            <div class="buttons">
              <div class="row m-zero">
                <div class="column">
                  <button type="button" class="button" id="btnCopyToClipboard">
                    Copy to Clipboard
                  </button>
                </div>
                <div class="column">
                  <button type="button" class="button" id="btnDownloadPreset">
                    Download
                  </button>
                </div>
              </div>
              <div class="divider"></div>
              <div class="row m-zero">
                <div class="column">
                  <button type="button" class="button" id="btnSimulatePreset">
                    Simulate
                  </button>
                </div>
                <div class="column">
                  <button type="button" class="button" id="btnSavePreset">
                    Save
                  </button>
                </div>
              </div>
            </div>
            <div id="singleCanvas"></div>
          </div>
          <div id="isAnimation">
            <div class="buttons">
              <div class="row m-zero">
                <div class="column">
                  <button type="button" class="button" id="btnCopyToClipboard">
                    Copy to Clipboard
                  </button>
                </div>
                <div class="column">
                  <button type="button" class="button" id="btnDownloadPreset">
                    Download
                  </button>
                </div>
              </div>
              <div class="divider"></div>
              <div class="row m-zero">
                <div class="column w-full">
                  <button type="button" class="button" id="btnSavePlaylist">
                    Save
                  </button>
                </div>
              </div>
            </div>
            <div id="multipleCanvas"></div>
          </div>
        </div>
        <footer>
          <a href="https://github.com/ajotanc/PixelMagicTool" target="_blank"
            >Github &copy; Pixel Magic Tool</a
          >
        </footer>
      </div>
    </div>
    <div id="toast-container"></div>
    <div id="overlay"></div>
  </body>
  <script>
    const e="file:"===window.location.protocol?"http:":window.location.protocol,t=window.location.host||"0.0.0.0";let n=`${e}//${t}`;const a=document.getElementById("hostname");a.value=t,a.addEventListener("change",(async()=>{n=`${e}//${a.value}`,await d(),await i(),c()}));let o=[],s={};function c(){const e=document.getElementById("images").parentNode.querySelector("a");e.href=e.href.replace("[wled-ip]",a.value)}async function l(e,t=!1,a=5e3){const o=`${n}/presets.json`,s=`${n}/json`;let c=0;I();const l=e.map((async e=>new Promise(((t,n)=>{setTimeout((async()=>{try{const t=await fetch(o),n=await t.json(),a=Object.keys(n),c=a.find((t=>"object"==typeof n[t]&&!n[t].playlist&&n[t].n===e.n))||parseInt(a.pop())+1,l=Object.assign(e,{psave:c}),i={method:"POST",body:JSON.stringify(l)};try{const t=await fetch(s,i),{success:n}=await t.json();n&&v(`Preset "${e.n}" save successfully!`)}catch(e){v(`Error saving preset: ${e}`,"error")}}catch(e){v(e,"error")}finally{t()}}),a*c++)}))));await Promise.all(l),t?setTimeout((async()=>{await async function(){const{value:e}=document.getElementById("duration"),{value:t}=document.getElementById("transition"),{value:a}=document.getElementById("name"),o=`${n}/presets.json`,s=`${n}/json`;try{const n=await fetch(o),c=await n.json(),l=Object.keys(c),i=l.filter((e=>"object"==typeof c[e]&&!c[e].playlist&&c[e].n&&c[e].n.startWith(a))),d={psave:l.find((e=>"object"==typeof c[e]&&c[e].playlist&&c[e].n&&c[e].n===a))||parseInt(l.pop())+1,n:a,on:!0,o:!1,playlist:{ps:i,dur:Array.from({length:i.length},(()=>10*e)),transition:Array.from({length:i.length},(()=>10*t)),repeat:0,end:0}},r={method:"POST",body:JSON.stringify(d)};try{const e=await fetch(s,r),{success:t}=await e.json();t&&v(`Playlist "${a}" save successfully!`)}catch(e){v(`Error saving preset: ${e}`,"error")}}catch(e){v(e,"error")}}().then((()=>{B()})).catch((()=>{B()}))}),a):B()}async function i(){const e=`${n}/edit?list=/`,t=document.getElementById("images");t.innerHTML="";[{text:"Select a choice",value:""},{text:"Upload",value:"upload"}].forEach((({text:e,value:n})=>{const a=new Option(e,n);t.appendChild(a)})),I();try{const a=await fetch(e),o=await a.json(),s=["jpeg","jpg","png","gif"];o.filter((e=>{const{name:t}=e,[n,a]=t.split(".");return e.name=t.replace("/",""),s.includes(a)})).map((e=>{const{name:a}=e,o=document.createElement("option");o.text=a,o.value=`${n}/${a}`,t.add(o)}))}catch(e){v(e,"error")}finally{B()}}async function d(){const e=document.getElementById("segments"),t=document.getElementById("pattern"),a=document.getElementById("width"),o=document.getElementById("height"),s=`${n}/json/state`;e.innerHTML="";[{text:"Select a choice",value:""}].forEach((({text:t,value:n})=>{const a=new Option(t,n);e.appendChild(a)})),I();try{const n=await fetch(s),{seg:c}=await n.json();c&&c.forEach((function({id:n,n:s,stop:c,stopY:l},i){const d=document.createElement("option");d.text=s||`Segment ${n}`,d.value=n,d.dataset.width=c,d.dataset.height=l,0===i&&(d.selected=!0,a.value=c,o.value=l,t.value=c*l>512?3:1),e.add(d)}))}catch(e){v(e,"error")}finally{B()}}!async function(){await d(),await i(),c()}();const r=document.getElementById("dropzone"),m=document.getElementById("source");function u(e){return new Promise(((t,n)=>{const a=new Image;a.addEventListener("load",(function(){t(a)})),a.addEventListener("error",(function(){n(new Error("Error loading image"))})),a.src=e}))}function y(e){const{value:t}=document.getElementById("pattern"),{value:n}=document.getElementById("segments"),{value:a}=document.getElementById("brightness"),{value:o}=document.getElementById("width"),{value:s}=document.getElementById("height"),{checked:c}=document.getElementById("resizeImage"),l=48,i=o*l,d=s*l,r=i<=768?14:18,m=o*s,u=[];let y=[];const{ctx:f}=h(o,s);f.drawImage(e,0,0,o,s);const E=f.getImageData(0,0,o,s).data,{canvas:v,ctx:I}=h(i,d);for(let e=0;e<s;e++)for(let t=0;t<o;t++){const n=e*o+t,a=g(E[4*n],E[4*n+1],E[4*n+2],E[4*n+3]),{r:s,g:c,b:i}=p(a);u.push(a);let d=t*l,m=e*l;I.fillStyle=`rgb(${s}, ${c}, ${i})`,I.fillRect(d,m,l,l),I.lineWidth=1,I.strokeStyle="#ffffff",I.strokeRect(d,m,l,l);let y=d+24,f=m+24;I.font=`${r}px Arial`,I.fillStyle="ffffff"==a?"#252525":"#ffffff",I.textAlign="center",I.textBaseline="middle",I.fillText(n+1,y,f)}switch(t){case"1":y=u;break;case"2":y=function(e){const t=[];return e.forEach(((e,n)=>{t.push(n,e)})),t}(u);break;case"3":y=function(e){let t=0,n=0,a=e[0],o=[];e.forEach(((e,s)=>{if(e!==a){n=s;1==n-t?o.push(a):o.push(t,n,a),t=s}a=e}));const s=e.length-t;1===s?o.push(a):o.push(t,e.length,a);return o}(u)}return{canvas:v,bri:a,id:n,i:y,length:m}}function g(e,t,n,a){const{checked:o}=document.getElementById("transparentImage"),{value:s}=document.getElementById("color");return 0===a?o?s.replace("#","").toLowerCase():f(255,255,255):f(e,t,n)}function p(e){3===(e=e.replace("#","")).length&&(e=e.replace(/(.)/g,"$1$1"));const[t,n,a]=e.match(/.{2}/g).map((e=>parseInt(e,16)));return{r:t,g:n,b:a}}function f(e,t,n){return("000000"+(e<<16|t<<8|n).toString(16)).slice(-6)}function h(e,t){const n=document.createElement("canvas");n.width=e,n.height=t;const a=n.getContext("2d",{willReadFrequently:!0});return a.imageSmoothingQuality="high",a.imageSmoothingEnabled=!1,{canvas:n,ctx:a}}function E(e,t){return"ha"===e?function(e){const{value:t}=document.getElementById("device"),{value:n}=document.getElementById("friendlyName"),{value:a}=document.getElementById("uniqueId"),{value:o}=document.getElementById("hostname");if(t){return function(e){function t(e,t){return"object"!=typeof e||Array.isArray(e)?e:n(e,t+1)}function n(e,a=0){const o="  ".repeat(a);return Object.entries(e).map((([e,s])=>"object"!=typeof s||Array.isArray(s)?`${o}${e}: ${t(s,a)}`:`${o}${e}:\n${n(s,a+1)}`)).join("\n")}return n(e)}({switches:{[t]:{friendly_name:n,unique_id:a,command_on:`curl -X POST "http://${o}/json/state" -d '${e}' -H "Content-Type: application/json"`,command_off:`curl -X POST "http://${o}/json/state" -d '{"on":false}' -H "Content-Type: application/json"`}}})}}(t):"curl"===e?function(e){const{value:t}=document.getElementById("hostname");return`curl -X POST "http://${t}/json/state" -d '${e}' -H "Content-Type: application/json"`}(t):t}function v(e,t="success",n=2e3,a="preview"){const o=document.getElementById(a),s=document.createElement("div");s.style.animation="fadeIn",s.style.animationDuration=`${n+100}ms`,s.style.animationTimingFunction="linear",s.classList.add("toast",t);const c=document.createElement("span");c.classList.add("toast-body"),c.textContent=e,s.appendChild(c);const l=document.createElement("div");l.classList.add("toast-progress"),l.style.animation="progress",l.style.animationDuration=`${n+100}ms`,l.style.animationDelay="0s",s.appendChild(l),document.getElementById("toast-container").appendChild(s),setTimeout((()=>{s.style.opacity=0,setTimeout((()=>{s.remove()}),100)}),n),"error"===t&&(o.style.display="none")}function I(){const e=document.getElementById("overlay");e.classList.add("loading"),e.style.display="block",e.style.cursor="not-allowed",document.body.style.overflow="hidden"}function B(){const e=document.getElementById("overlay");e.classList.remove("loading"),e.style.display="none",e.style.cursor="default",document.body.style.overflow="auto"}function w(e){e.preventDefault();const t=document.getElementById("formGenerate").querySelectorAll("input, select, textarea");let n=!0;const a=navigator.language||navigator.userLanguage;return t.forEach((e=>{const t=e.closest(".valitade");if(!t)return;let o=!0,s=t;for(;s!==document.body;){const e=window.getComputedStyle(s);if("none"===e.display||"hidden"===e.display){o=!1;break}s=s.parentNode}if(o&&(!e.checkValidity()||"file"===e.type&&0===e.files.length)){e.classList.add("invalid");const o=e.dataset.errorMessage||e.validationMessage||function(e){e.includes("-")&&(e=e.split("-")[1]);const t={en:"This field is required.",br:"Este campo é obrigatório.",pt:"Este campo é obrigatório.",es:"¡Este campo es obligatorio.",fr:"Ce champ est obligatoire.",de:"Dieses Feld ist erforderlich.",it:"Questo campo è obbligatorio."};return t[e.toLowerCase()]||t.en}(a);let s=t.querySelector(".error-message");s||(s=document.createElement("div"),s.classList.add("error-message"),t.appendChild(s)),s.innerText=o,n=!1}else{e.classList.remove("invalid");const n=t.querySelector(".error-message");n&&t.removeChild(n)}})),n}function b(){const{checked:e}=document.getElementById("animation"),t=e?["gif"]:["jpeg","jpg","png","gif"],n=document.getElementById("source").files[0],a=document.getElementById("images"),{value:o}=a.selectedOptions[0],s="upload"===o?n.name.split(".").pop():o.split(".").pop();return!!t.includes(s)||(v(e?"Image format is not valid, select a GIF!":"Image format is not valid","error"),!1)}r.addEventListener("dragover",(e=>{e.preventDefault()})),r.addEventListener("drop",(e=>{e.preventDefault();const t=document.getElementById("dropzoneLabel");m.files=e.dataTransfer.files;const{name:n}=m.files[0];t.textContent=`Image ${n} selected!`,w(e)})),r.addEventListener("click",(()=>{m.click()})),m.addEventListener("change",(e=>{const t=document.getElementById("dropzoneLabel"),{name:n}=e.target.files[0];t.textContent=`Image ${n} selected!`,w(e)})),document.getElementById("btnSimulatePreset").addEventListener("click",(async()=>{const e=`${n}/json/state`,t={method:"POST",body:JSON.stringify(s)};I();try{const n=await fetch(e,t),{success:a}=await n.json();a&&v("Preset sent successfully!")}catch(e){v(e,"error")}finally{B()}})),document.getElementById("btnSavePreset").addEventListener("click",(async()=>{const{value:e}=document.getElementById("name");o.splice(0),o.push(Object.assign({},s,{n:e,o:!1})),await l(o)})),document.getElementById("btnSavePlaylist").addEventListener("click",(async()=>{await l(o,!0)})),document.querySelectorAll("#btnCopyToClipboard").forEach((e=>{e.addEventListener("click",(async()=>{const e=document.getElementById("response");e.select();try{await navigator.clipboard.writeText(e.value),v("Text copied to clipboard")}catch(e){try{await document.execCommand("copy"),v("Text copied to clipboard")}catch(e){v(e,"error")}}}))})),document.querySelectorAll("#btnDownloadPreset").forEach((e=>{e.addEventListener("click",(()=>{const{value:e}=document.getElementById("response"),{value:t}=document.getElementById("output");!function(e,t,n){let a,o;switch(n){case"json":a="application/json",o="json";break;case"ha":a="application/x-yaml",o="yaml";break;case"curl":a="text/plain",o="txt"}const s=new Blob([e],{type:a}),c=URL.createObjectURL(s),l=document.createElement("a");l.href=c,l.download=`${t}.${o}`,l.click(),URL.revokeObjectURL(c)}(e,`WLED_${(new Date).getTime()}`,t)}))})),document.getElementById("segments").addEventListener("change",(e=>{const t=document.getElementById("width"),n=document.getElementById("height"),{width:a,height:o}=e.target.selectedOptions[0].dataset;t.value=a,n.value=o})),document.getElementById("output").addEventListener("change",(e=>{const t=document.getElementsByClassName("output"),{value:n}=e.target.selectedOptions[0];Array.from(t).forEach((function(e){e.style.display="ha"===n?"flex":"none"}))})),document.getElementById("images").addEventListener("change",(e=>{const t=document.getElementById("dropzone"),{value:n}=e.target.selectedOptions[0];if("upload"===n){const e=document.getElementById("dropzoneLabel"),n=document.getElementById("source");e.textContent="Drag and drop a file here or click to select a file",n.value="",t.style.display="block"}else t.style.display="none"})),document.getElementById("transparentImage").addEventListener("change",(e=>{const t=document.getElementsByClassName("transparentImage"),{checked:n}=e.target;Array.from(t).forEach((function(e){e.style.display=n?"flex":"none"}))})),document.getElementById("resizeImage").addEventListener("change",(e=>{const t=document.getElementsByClassName("resizeImage"),n=document.getElementById("pattern"),{checked:a}=e.target;Array.from(t).forEach((function(e){a?(n.value=3,e.style.display="flex"):(n.value=1,e.style.display="none")}))})),document.getElementById("animation").addEventListener("change",(e=>{const t=document.getElementsByClassName("animation"),n=document.getElementById("pattern"),{checked:a}=e.target;Array.from(t).forEach((function(e){a?(v('If you want all frames in the image, set it to "0"',"warning",5e3),e.style.display="flex",n.value=3):(e.style.display="none",n.value=1)}))})),document.getElementById("btnGenerate").addEventListener("click",(async e=>{const{checked:t}=document.getElementById("animation"),n=document.getElementById("preview"),a=document.getElementById("isNotAnimation"),c=document.getElementById("singleCanvas"),l=document.getElementById("isAnimation"),i=document.getElementById("multipleCanvas");w(e)&&(o.splice(0),n.style.display="block",t?(l.style.display="block",a.style.display="none",c.innerHTML="",await async function(){if(b()){const e=document.getElementById("source").files[0],t=document.getElementById("images"),n=(document.getElementById("preview"),document.getElementById("response")),{value:a}=document.getElementById("name"),{value:s}=document.getElementById("frames"),{value:c}=document.getElementById("output"),{value:l}=document.getElementById("duration"),{text:i,value:d}=t.selectedOptions[0];I();try{const t=new FormData;if("upload"===d)t.append("image",e);else{const e=await fetch(d),n=await e.blob(),a=new File([n],i,{type:n.type});t.append("image",a)}const r=await fetch(`https://pixelmagictool.vercel.app/api/wled/frames?amount=${s}`,{method:"POST",body:t}),{message:m,frames:g}=await r.json();if(!r.ok)return void v(m,"error");o=[];const p=[],f=[],h=1e3*l,I=g.map((async(e,t)=>{const n=await u(e),{canvas:s,bri:c,id:l,i:i}=y(n),d={on:!0,bri:c,seg:{id:l,i:i}},r=`${a} ${t+1}`;p.push(`${r}|${JSON.stringify(d)}`),f.push(s),o.push(Object.assign(d,{n:r,o:!0}))}));await Promise.all(I);const B=p.map((e=>{const[t,n]=e.split("|"),a=E(c,n);return`${["ha","curl"].includes(c)?"#":"//"} ${t}\n${a}`}));n.value=B.join("\n"),v(m),function(e,t,n=3e3){let a=0;const o=document.createElement("div");o.classList.add("carousel"),t.forEach(((e,t)=>{t===a||(e.style.display="none"),o.appendChild(e)}));const s=document.getElementById(e);function c(){t[a].style.display="none",a++,a>=t.length&&(a=0),t[a].style.display="block",i()}let l;function i(){clearTimeout(l),l=setTimeout((()=>{c(),0===a&&o.scrollTo(0,0)}),n)}s.innerHTML="",s.appendChild(o),i(),o.addEventListener("mouseover",(()=>{clearTimeout(l)})),o.addEventListener("mouseout",(()=>{i()}))}("multipleCanvas",f,h)}catch(e){v(e,"error")}finally{B()}}}()):(l.style.display="none",a.style.display="block",i.innerHTML="",await async function(){if(b()){const e=document.getElementById("source").files[0],{value:t}=document.getElementById("images"),{value:n}=document.getElementById("output");I();try{const a=document.getElementById("response"),o=document.getElementById("singleCanvas");o.innerHTML="";const c="upload"===t?URL.createObjectURL(e):t,l=await u(c),{canvas:i,bri:d,id:r,i:m,length:g}=y(l);await new Promise((e=>{Object.assign(s,{on:!0,bri:d,seg:{id:r,i:m}}),e()}));const p=E(n,JSON.stringify(s));a.value=p,o.appendChild(i)}catch(e){v(e,"error")}finally{B()}}}()))}));
  </script>
</html>
